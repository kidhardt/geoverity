/**
 * GeoVerity 2026 Global Styles
 * Building-pages v2.0.0 compliant
 */

/* ========================================
   CSS CUSTOM PROPERTIES (Design Tokens)
   ======================================== */

:root {
  /* Typography - System fonts prevent CLS from web font loading */
  --font-family-sans: system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  --font-family-serif: Georgia, Cambria, 'Times New Roman', Times, serif;

  /* Font display for web fonts (if added later) - prevent FOIT/FOUC */
  /* Use font-display: optional for best CLS, or swap with size-adjust */
  font-display: optional;

  /* Colors - WCAG 2.2 AA compliant contrast */
  --color-text: #1a1a1a;
  --color-text-inverse: #ffffff;
  --color-background: #ffffff;
  --color-background-alt: #f5f5f5;

  /* Focus indicator - WCAG 2.2 AA+ */
  --color-focus: #0066cc;
  --focus-ring-width: 2px;
  --focus-ring-offset: 2px;

  /* Interactive elements */
  --color-link: #0066cc;
  --color-link-hover: #004499;
  --color-link-visited: #551a8b;

  /* Tap targets - Building-pages compliant */
  --tap-target-min: 44px; /* Preferred minimum */
  --tap-target-comfortable: 48px;
  --tap-target-padding: 12px; /* For 32px controls */

  /* Spacing */
  --space-xs: 0.25rem;
  --space-sm: 0.5rem;
  --space-md: 1rem;
  --space-lg: 1.5rem;
  --space-xl: 2rem;
  --space-2xl: 3rem;

  /* Layout */
  --container-max-width: 1200px;
  --header-height: 64px;

  /* Z-index scale */
  --z-skip-link: 9999;
  --z-header: 1000;
  --z-drawer: 1100;
  --z-overlay: 1050;
}

/* ========================================
   CSS RESET & BASE STYLES
   ======================================== */

*,
*::before,
*::after {
  box-sizing: border-box;
}

html {
  -webkit-text-size-adjust: 100%;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;

  /* Prevent horizontal layout shift from scrollbar appearing/disappearing */
  scrollbar-gutter: stable;
}

body {
  margin: 0;
  font-family: var(--font-family-sans);
  font-size: 1rem;
  line-height: 1.6;
  color: var(--color-text);
  background-color: var(--color-background);
}

/* ========================================
   FOCUS MANAGEMENT (WCAG 2.2 AA+)
   ======================================== */

/* Always visible focus - customized but NEVER removed */
:focus {
  outline: var(--focus-ring-width) solid var(--color-focus);
  outline-offset: var(--focus-ring-offset);
}

/* Enhanced focus for keyboard users */
:focus-visible {
  outline: var(--focus-ring-width) solid var(--color-focus);
  outline-offset: var(--focus-ring-offset);
}

/* Focus within for containers */
:focus-within {
  /* Used for form groups, nav containers */
}

/* Skip link - must be visible on focus */
.skip-link {
  position: absolute;
  top: var(--space-sm);
  left: var(--space-sm);
  z-index: var(--z-skip-link);
  padding: var(--tap-target-padding);
  background-color: var(--color-focus);
  color: var(--color-text-inverse);
  text-decoration: none;
  border-radius: 4px;

  /* Hidden until focused - Building-pages requirement */
  transform: translateY(-200%);
  transition: transform 0.2s ease-in-out;
}

.skip-link:focus {
  transform: translateY(0);
}

/* ========================================
   TAP TARGETS (Building-pages ยง4)
   ======================================== */

/* All interactive elements must meet tap target minimum */
a,
button,
[role="button"],
[type="button"],
[type="submit"],
[type="reset"],
input[type="checkbox"],
input[type="radio"],
select {
  min-height: var(--tap-target-min);
  min-width: var(--tap-target-min);
}

/* Alternative: 32px control + 12px padding */
.tap-target-compact {
  min-height: 32px;
  min-width: 32px;
  padding: var(--tap-target-padding);
}

/* ========================================
   TYPOGRAPHY
   ======================================== */

h1, h2, h3, h4, h5, h6 {
  margin-top: 0;
  margin-bottom: var(--space-md);
  font-weight: 700;
  line-height: 1.2;
}

h1 {
  font-size: clamp(2rem, 5vw, 3rem);
}

h2 {
  font-size: clamp(1.5rem, 4vw, 2.25rem);
}

h3 {
  font-size: clamp(1.25rem, 3vw, 1.75rem);
}

p {
  margin-top: 0;
  margin-bottom: var(--space-md);
}

/* ========================================
   LINKS (WCAG 2.2 AA Contrast)
   ======================================== */

a {
  color: var(--color-link);
  text-decoration: underline;
  text-underline-offset: 0.2em;
}

a:hover {
  color: var(--color-link-hover);
}

a:visited {
  color: var(--color-link-visited);
}

a:active {
  color: var(--color-link-hover);
}

/* ========================================
   LANDMARKS & LAYOUT
   ======================================== */

/* Ensure landmarks are properly structured */
header[role="banner"],
nav[role="navigation"],
main[role="main"],
footer[role="contentinfo"] {
  /* Semantic HTML provides roles automatically */
}

/* ========================================
   RESPONSIVE / MOBILE-FIRST
   ======================================== */

/* Base styles are mobile (320px+) */
/* Use min-width media queries for progressive enhancement */

@media (min-width: 768px) {
  :root {
    --header-height: 80px;
  }
}

/* ========================================
   UTILITY CLASSES
   ======================================== */

/* Screen reader only (for ARIA live regions, labels) */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

/* Visually hidden but focusable (for skip links) */
.sr-only-focusable:focus,
.sr-only-focusable:active {
  position: static;
  width: auto;
  height: auto;
  overflow: visible;
  clip: auto;
  white-space: normal;
}

/* ========================================
   PERFORMANCE OPTIMIZATIONS (CLS Prevention)
   Target: CLS < 0.1 for 75% of visits
   ======================================== */

/* Prevent layout shift from images - mobile first */
img {
  max-width: 100%;
  height: auto;
  display: block;
  /* Browser automatically calculates aspect-ratio from width/height attributes */
}

/* Ensure images have explicit dimensions in HTML:
   <img src="..." width="640" height="360" alt="...">
   This prevents CLS by reserving space before load */

/* Responsive images with consistent aspect ratios */
img[width][height] {
  /* Browser respects intrinsic aspect ratio */
  aspect-ratio: attr(width) / attr(height);
}

/* Hero sections - prevent CLS with min-height */
.hero,
section.hero {
  /* Reserve minimum space for hero content on mobile */
  min-height: 320px;
}

@media (min-width: 768px) {
  .hero,
  section.hero {
    min-height: 400px;
  }
}

@media (min-width: 1024px) {
  .hero,
  section.hero {
    min-height: 500px;
  }
}

/* Hero images with aspect ratio */
.hero-image {
  aspect-ratio: 16 / 9;
  object-fit: cover;
  width: 100%;
}

/* Content sections - prevent shift from late-loading content */
.content-section,
article section {
  /* Reserve minimum space for content sections */
  min-height: 200px;
}

/* Service cards / grid items - consistent sizing */
.service-card,
.card {
  /* Prevent shift when cards load at different speeds */
  min-height: 280px;
}

@media (min-width: 768px) {
  .service-card,
  .card {
    min-height: 320px;
  }
}

/* Navigation - fixed height prevents header shift */
header[role="banner"] {
  /* Height is set via --header-height in base layout */
  min-height: var(--header-height);
}

/* Footer - prevent shift from late-loading scripts */
footer[role="contentinfo"] {
  min-height: 120px;
}

/* Embedded content placeholders (iframes, embeds) */
iframe,
embed,
object {
  /* Maintain aspect ratio for embeds */
  aspect-ratio: 16 / 9;
  width: 100%;
  height: auto;
}

/* Video embeds - YouTube, Vimeo, etc */
.video-embed,
.embed-container {
  position: relative;
  aspect-ratio: 16 / 9;
  width: 100%;
  overflow: hidden;
}

.video-embed iframe,
.embed-container iframe {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

/* ========================================
   REDUCED MOTION (Accessibility)
   ======================================== */

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* ========================================
   HIGH CONTRAST MODE (Forced Colors)
   ======================================== */

@media (forced-colors: active) {
  /* Ensure focus rings visible in high contrast mode */
  :focus-visible {
    outline: 2px solid currentColor;
  }

  .skip-link:focus {
    outline: 2px solid currentColor;
  }
}
